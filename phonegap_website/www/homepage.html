<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
        var account = sessionStorage.getItem("account_id");
        if(! account){ // if not defined (i.e. value is undefined or null)
            alert("Please Login");
            location.replace("index.html");
        }else{
            var isAdmin = sessionStorage.getItem("isAdmin");
            if(! isAdmin || isAdmin == "false"){ // if not defined or false
                alert("Sorry you do not have access to this page");
                location.replace("homepage_client.html");
            }
        }
    </script>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/Fullscreen-Loading-Indicators-with-jQuery-CSS3-HoldOn-js/src/js/HoldOn.min.js"></script>

    <meta name="description" content="">
    <meta name="author" content="">

    <title>Deloitte New Zealand </title>
    <link rel=" shortcut icon" href="imgs/favicon.ico">

    <link href="js/Fullscreen-Loading-Indicators-with-jQuery-CSS3-HoldOn-js/src/css/HoldOn.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/select2.min.css" rel="stylesheet">
    <link href="css/modal.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet'
          type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>


    <script src="js/Scripts/webServices.js"></script>
    <script src="js/select2.min.js"></script>
    <script src="js/Scripts/homepage.js"></script>

    <script type="application/javascript" src="js/raphael-min.js"></script>
    <script type="application/javascript" src="js/colorwheel.js"></script>

    <script type="text/javascript" src="js/jquery.autocomplete.min.js"></script>

    <script src="js/bootstrap.min.js"></script>
    <link href="css/agency.css" rel="stylesheet">

    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

    <script src="js/iframeResizer.min.js"></script>

    <!--pNotify related links-->
    <script type="application/javascript" src="js/pnotify.custom.min.js"></script>
    <link rel="stylesheet" media="all" href="css/pnotify.custom.min.css"/>


    <script type="application/javascript">
        $(document).ready(function () {

            HoldOn.open(); //Loading Screen

            showDD(); //Show dropdown

            // Wrapping of default alert
            window.alert = function (message) {
                new PNotify({
                    title: 'Alert',
                    text: message,
                    type: alert_type,
                    opacity: .8,
                    nonblock: {
                        nonblock: true,
                        nonblock_opacity: .2
                    },
                    buttons: {
                        show_on_nonblock: true
                    }
                });
            };

            $('#frameQual').iFrameResize();
            $('#frameCreateClient').iFrameResize();
            $('#frameCreateProj').iFrameResize();
            $('#frameViewQual').iFrameResize();

            // Event handling for when the modal's are closed the iframes are unloaded,
            // TODO Add loading of iframe src's to relevant openModal functions
            // E.g. $('#frameViewQual').attr('src', 'view_qual.html');
            $('#qualModal').on('hidden.bs.modal', function () {
                $('#frameQual').attr('src', '');
                $('#qualModalLabel').text("");
            });

            $('#createProjModal').on('hidden.bs.modal', function () {
                $('#frameCreateProj').attr('src', '');
            });

            $('#createClientModal').on('hidden.bs.modal', function () {
                $('#frameCreateClient').attr('src', '');
            });

            $('#viewQualModal').on('hidden.bs.modal', function () {
                $('#frameViewQual').attr('src', '');
                $('#client-logo').attr('src', '');
                $('#qual-projectName').text('');
            });

            //the project cart will be hidden when the user clicks elsewhere on the screen
            $(document).click(function (e) {
                e.preventDefault();
                $('body').removeClass('nav-expanded');
                $('#logoutButton').css('marginRight', '200px');
            });
            $("#nav-expander").click(function (e) {
                e.stopImmediatePropagation();
                e.preventDefault();
                if ($('body').hasClass('nav-expanded')) {
                    $('body').removeClass('nav-expanded');
                    $('#logoutButton').css('marginRight', '200px');
                } else {
                    $('body').toggleClass('nav-expanded');
                    $('#logoutButton').css('marginRight', '500px');
                }
            });

            $("#projectCartNav, #qualCollection", "#deleteQual").click(function(e) {
                e.stopImmediatePropagation();
                if (this.id = 'qualCollection') {
                    $('#createProjModal').modal('show');
                } else if (this.id = 'projectCartNav') {
                    e.stopPropagation();
                    return false;
                }else if(this.id = 'deleteQual'){
//                    e.stopImmediatePropagation();
                    e.preventDefault();
                    $('#createProjModal').modal('hide');
                    $('body').toggleClass('nav-expanded');
                    $('#logoutButton').css('marginRight', '500px');
                }

            });

            $('#newQual').click(function (e) {
                e.stopImmediatePropagation();
                window.location.replace("qual_add.html")
            });

            $('#logoutUser').click(function (e) {
                e.stopImmediatePropagation();
                sessionStorage.clear();
                window.location.replace('index.html');
            });

            //this is to hide the div containing the notification of "qual added to cart"
//            document.getElementById("divAddToCartAlert").style.display = 'none';
        });

        //Popup asking the user for confirmation on deleting a qual, client or project.
        function confirmArchive(archiveType, itemID){
            $('#form_submit').text('Delete').addClass("btn-danger");
            $('#form_body').text('This will be deleted. This can only be undone by a superuser. Are you sure?');

            if(archiveType == "CLIENT"){
                confirmAction(itemID, "Heads Up!", "Deleting a client can only be undone by a superuser. Are you sure?" ,"error", "CLIENT", "Client successfully archived!");
            }else if(archiveType == "PROJECT"){
                confirmAction(itemID, "Heads Up!", "Deleting a project can only be undone by a superuser. Are you sure?", "error", "PROJECT", "Project successfully archived!")
            }else if(archiveType == "QUAL"){
                confirmAction(itemID, "Heads Up!", "Deleting a qual can only be undone by a superuser. Are you sure?", "error", "QUAL", "Qual successfully archived!");

            }
        };

        setTimeout(function(){
            HoldOn.close(); //Close the loading, gives control back to the user.
        },2000);

    </script>
    <script>
        function successMessage(notice_title, notice_text){
            new PNotify({
                title: notice_title,
                text: notice_text,
                type: 'success'
            });
        }

        //Message confirming to user that quals have been added to the cart
        function successMessageCart(nQuals){
            new PNotify({
                title: "Success",
                text: " " +nQuals + " have been successfully been added to the cart",
                type: 'success'
            });
        }

        //Confirming to the user that something has been succesfully been deleted,
        //the main arguments of the method is the item id, the title of the notice and the text it will contain,


        function confirmAction(item_id, notice_title, notice_text, notice_type, submit_option) {
            var notice = new PNotify({
                title: notice_title,
                text: notice_text,
                icon: true,
                hide: false,
                type: notice_type,
                confirm: {
                    confirm: true
                },
                buttons: {
                    closer: false,
                    sticker: false
                },
                history: {
                    history: false
                }
            }).get().on('pnotify.confirm', function () {
                        if (submit_option == "CLIENT") {
                            successMessage("Success", "The client has been sucessfully deleted. Please wait while we reload");
                            timeout();
                            archiveClient(item_id);

                        }
                        else if (submit_option == "PROJECT") {
                            successMessage("Success", "The project has been sucessfully deleted. Please wait while we reload");
                            timeout();
                            archiveProject(item_id);

                        }
                        else if (submit_option == "QUAL") {
                            successMessage("Success", "The qual has been sucessfully deleted. Please wait while we reload");
                            timeout();
                            archiveQual(item_id);

                        }
                    }).on('pnotify.cancel', function () {

                    });
        }

        //reloads the page after the set timeout of 2000ms
        function timeout() {
            setTimeout(function () {
                location.reload();
            }, 2000);
        }

        //clears a form of data
        function cleanseForm(){
            $('#form_title').text("");
            $('#form_body').text("");

            $('#form_submit').text("").removeClass('btn-primary btn-danger');
        }
    </script>
    <script>

        //Used to hide a dropdown associated wth the client
        function hideDD(){
            $('#div_clientDD').hide();
            $('#div_clientTB').show();
//            $('#div_clientC').show();
//            $('#div_clientA').show();
        }

        //Ahows the dropdows associated with the client
        function showDD(){
            $('#div_clientTB').hide();
            $('#div_clientDD').show();
//            $('#div_clientC').hide();
//            $('#div_clientA').hide();
        }
    </script>
</head>

<body id="page-top" class="index">




<div id="form_notice" style="display: none;">
    <form action method="POST" class="pf-form">
        <div class="pf-element">
            <div id="form_body">
            </div>
        </div>
        <div class="pf-element pf-buttons">
            <button id="form_cancel" type="button" name="cancel" class="pf-button btn btn-default">Cancel</button>
            <button id="form_submit" type="submit" name="submit" class="pf-button btn"></button>
        </div>
    </form>
</div>

<!-- Add/Edit/Duplicate Qual Modal -->
<div class="qualModal modal fade" id="qualModal" tabindex="-1" role="dialog" aria-labelledby="qualModalLabel">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i
                        class="fa fa-times fa-2x"></i></button>
                <h4 class="modal-title" id="qualModalLabel"></h4>
            </div>
            <div class="modal-body">
                <iframe id="frameQual" src="" width="100%" scrolling="no" frameborder="0"></iframe>
            </div>
            <div class="modal-footer hidden">
                <button id="btnQualModalClose" type="button" class="hidden btn btn-default" data-dismiss="modal">Close
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Navigation -->

<nav id="projectCartNav">
    <div class="list-unstyled main-menu" id="ProjectCart">
        <div class="row margin-rl" style="border-bottom: 1px solid #323949;margin-bottom: 0px;padding-bottom: 15px;">
            <button id="qualCollection" type='submit' class='btn btn-primary' data-toggle="modal" style="display: block;margin: 0 auto;float: right;"
                    data-target="#createProjModal">Create Project
            </button>
            <a class="pull-right" href="#" id="nav-close"></a>
        </div>
    </div>
</nav>

<div id="createProjModal" class="modal fade" tabindex="-1" role="dialog">>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button> <!--Close Modal Button-->
                <h4 id="project_modal_title" class="modal-title">Create Project</h4>
            </div>
            <div class="modal-body">
                <!--Create project form, allowing users to create a new project, this is in the right nav bar
                Users have the option to assign the project to an exisiting client or create a new client-->
                <form class="form-horizontal" role="form" id="createProjForm">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Project Name</label>

                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="projName" required/>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12">
                            <div class="btn-group btn-group-justified" data-toggle="buttons">
                                <!--If Select exisiting client radio is selected, a dropdown will show (showDD()) will be called-->
                                <label class="btn btn-default active">
                                    <input type="radio" id="existingClientSelect" value="existing" onchange="showDD();" name="clientRadio" checked="checked"/>
                                    Select Existing Client
                                </label>
                                <!--If Select Enter New Client radio is selected, the drop down will be hidden-->
                                <label class="btn btn-default">
                                    <input type="radio" id="newClientSelect" value="new" onchange="hideDD();" name="clientRadio"/>
                                    Enter New Client
                                </label>
                            </div>
                        </div>
                    </div>
                    <div id="div_clientDD" class="col-md-12 no-padding" style="padding-bottom: 15px;">
                        <select id="clientDropdown" class="form-control"
                                style="width: 100%;">
                        </select>
                    </div>
                    <div  id="div_clientTB">
                        <div class="col-md-12 no-padding">
                            <input type="text" class="form-control" id="modalClientName"placeholder="Client name"/>
                        </div>
                        <div  class="col-md-12 margin-tb alert alert-info alert-dismissible" role="alert">
                            Please be mindful of the two colour combinations and the contrast between them.
                        </div>

                        <!--The below div holds the primary and secondary color wheels when the user has clicked on creating
                        a project and selected a new client, the colors will be assigned to the new client created.-->
                        <div  class="row">
                            <div id="primary_color_wheel2" class="col-md-6 col-xs-8">
                                <label for="client_colour_primary2">Primary Colour: </label>
                                <input id="client_colour_primary2" type="text" maxlength="7" style="max-width: 100px;"
                                       class="form-control" value="#091D5D" placeholder="#091D5D">

                                <div class="colorwheel"></div>
                            </div>
                            <div id="secondary_color_wheel2" class="col-md-6 col-xs-8">
                                <label for="client_colour_secondary2">Secondary Colour: </label>
                                <input id="client_colour_secondary2" type="text" maxlength="7" style="max-width: 100px;"
                                       class="form-control" value="#DDD2B5" placeholder="#DDD2B5">

                                <div class="colorwheel"></div>
                            </div>
                        </div>
                        <div style="height: 15px;"></div>
                        <div style="display: none" id="passwordAlert2" class="alert alert-success alert-dismissible" role="alert">

                        </div>
                    </div>
                </form>
            </div>

            <!--footer for the modal -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="createProjBtn">Create</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->


<!-- The user can click the plus symbol on the top of the website and create a new client, this weill popup the
 following client, which allows the user to define a name and the primary and secondary colors for that client.-->
<div id="createClientModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button> <!--Close the Modal i.e Cancel-->
                <h4 id="client_modal_heading" class="modal-title">Create Client</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" id="createClientForm">
                    <div class="form-group">
                        <label class="col-sm-3 control-label"  for="modalClientName" placeholder="Client name">Client Name</label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="clientName" value=""/> <!--input box for client name.-->
                        </div>
                    </div>
                </form>
                <div class="alert alert-info alert-dismissible" role="alert">
                    Please be mindful of the two colour combinations and the contrast between them.
                </div>

                <!--The below div holds the primary and secondary color wheels when the user has clicked on creating
                a project and selected a new client, the colors will be assigned to the new client created.-->

                <div class="row">
                    <div id="primary_color_wheel" class="col-md-6 col-xs-8">
                        <label for="client_colour_primary">Primary Colour: </label>
                        <input id="client_colour_primary" type="text" maxlength="7" style="max-width: 100px;"
                               class="form-control" value="#091D5D" placeholder="#091D5D">

                        <div class="colorwheel"></div>
                    </div>
                    <div id="secondary_color_wheel" class="col-md-6 col-xs-8">
                        <label for="client_colour_secondary">Secondary Colour: </label>
                        <input id="client_colour_secondary" type="text" maxlength="7" style="max-width: 100px;"
                               class="form-control" value="#DDD2B5" placeholder="#DDD2B5">

                        <div class="colorwheel"></div>
                    </div>

                </div>
                <div style="height: 15px;"></div>
                <!--passwordAlert will tell the admin user what the new clients password is, this will be generated and displayed-->
                <div style="display: none" id="passwordAlert" class="alert alert-success alert-dismissible" role="alert">

                </div>
                </form>

                <!--<iframe id="frameQualAdd" src="qual_add.html" width="100%" scrolling="no" frameborder="0"></iframe>-->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="createClientBtn">Create</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<!--Similar to the create client modal, this allows exactly the same functionality but it updates the clients
details once submitted.-->
<div id="updateClientModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 id="update_client_modal_heading" class="modal-title">Update Client</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" id="updateClientForm">
                    <div class="form-group">
                        <label class="col-sm-3 control-label"  for="modalClientName">Client Name</label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="update_clientName" value=""/>
                        </div>
                    </div>
                </form>
                <div class="alert alert-info alert-dismissible" role="alert">
                    Please be mindful of the two colour combinations and the contrast between them.
                </div>
                <div class="row">
                    <div id="update_primary_color_wheel" class="col-md-6 col-xs-8">
                        <label for="update_qual_colour_primary">Primary Colour: </label>
                        <input id="update_qual_colour_primary" type="text" maxlength="7" style="max-width: 100px;"
                               class="form-control" value="#091D5D" placeholder="#091D5D">

                        <div class="colorwheel"></div>
                    </div>
                    <div id="update_secondary_color_wheel" class="col-md-6 col-xs-8">
                        <label for="update_qual_colour_secondary">Secondary Colour: </label>
                        <input id="update_qual_colour_secondary" type="text" maxlength="7" style="max-width: 100px;"
                               class="form-control" value="#DDD2B5" placeholder="#DDD2B5">

                        <div class="colorwheel"></div>
                    </div>

                </div>
                <div style="height: 15px;"></div>
                <div style="display: none" id="update_passwordAlert" class="alert alert-success alert-dismissible" role="alert">

                </div>
                </form>

                <!--<iframe id="frameQualAdd" src="qual_add.html" width="100%" scrolling="no" frameborder="0"></iframe>-->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="updateClientBtn">Update</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->



<!--The header bar for the homepage, this has a searchbar which allows searching quals, Project, client
this also has the log out button, the add plus dropdown button which holds 3 adds, addQual addProject and addClient
it also has the right navigation bar which expands out from the right-->
<div class="navbar navbar-inverse navbar-fixed-top">

    <div class="container-fluid">

        <!--The div below is the "qualShoppingCart" which expands out from the right, this has the createPorejct
        button dynamically populated in it, and also hold all the quals added to it.-->
        <div class="navbar-header pull-right">

            <a id="nav-expander" class="nav-expander fixed" data-toggle="collapse" data-target=".temp">
                Qual Collection &nbsp;<i class="fa fa-bars fa-lg white"></i>
            </a>
        </div>

        <div id="logoutButton" style="margin-right: 200px">
            <ul id="hiddenNew" class="nav navbar-nav navbar-right">
                <!--Log out button, on click goes back to the index html and it also clears the session storage-->
                <li><a href="index.html" id="logoutUser" style="color: white"
                       onclick="javascript: sessionStorage.clear();">Logout <span
                        class="glyphicon glyphicon-log-out"></span></a></li>
                <li id="options" class="dropdown active">

                    <!--Plus symbol dropdown button which gives the user of the 3 different dd options -->
                    <a href="#" class="dropdown-toggle fa fa-plus fa-lg white" data-toggle="dropdown" style="background-color: #002776;""> <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#" data-toggle="modal" data-target="#qualModal" onclick="addQual();">New Qual</a>
                        </li>
                        <li><a href="#" data-toggle="modal" data-target="#createProjModal" onclick="resetProjID()">New
                            Project</a></li>
                        <li><a href="#" data-toggle="modal" data-target="#createClientModal">New Client</a></li>
                    </ul>
                </li>
            </ul>
        </div>


        <div class="col-sm-5 spec_vertical_center" style="padding-left: 36px;">
            <div  class="input-group stylish-input-group">
                <input id="searchBox" type="text" class="form-control"  placeholder="Search..." onkeyup="search()" >
                    <span id="searchIcon" class="input-group-addon" style="font-size:13px">
                        <button type="button">
                            <span class="glyphicon glyphicon-search"></span>

                        </button>
                    </span>
            </div>
            <ul class="nav navbar-nav">
                <li id="resultLI" class="dropdown active">
                    <ul id="resultUL" class="dropdown-menu" style="width:695px; ">

                    </ul>
                </li>
            </ul>
        </div>
        <div class="col-md-1" id="superAdminDiv">
        </div>
    </div>

</div>

<script>

    var htmlClientProject = "";
    var qualsToAdd = [];
    var projGroupID = -1;
    var projName = "";

    $(document).ready(function () {

        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            var target = $(e.target).attr("href"); // activated tab
            loadTab(target);
        });

        var account_id = sessionStorage.getItem("account_id"); // the admin account id
        getProjects(account_id); //Gets all the projects associated with the admin account
        getEverything(); //get everything else associated with the account.


        //If the create proect button has been clicked the following functionality is carried out.
        $('#createProjBtn').click(function (e) {
            HoldOn.open(); //Loading Screen is shown
            e.preventDefault();
            var projName = $('#projName').val(); // the value of the project name is stored
            var clientName = $("#clientName").val(); // client name stored in a variable
            createProjectGroup(projName); //The information is passed forward and stored on the webservice
            setTimeout(function(){
                HoldOn.close(); //loading screen closes after 2000ms
            },2000);
            $("#createProjBtn").prop('disabled', true); //the button is disabled
        });

        //getAccounts ID and the callback function stored the account in a variable
        getAccountById(account_id, function() {
            var account = this;
            if (account.isSuperUser == true) {  // if the accoun is a superuser display a special access button, dynamically loaded in the code
                var htmlStr = "<button id='superAdminBtn' class='btn spec_vertical_center'>Access Super User</button>";
                $("#superAdminDiv").html(htmlStr);
                $("#superAdminBtn").click(function (e) {
                    document.location.href = "superuser_view.html";
                });
            }
        });

        //If the updateclientBtn is clicked
        $('#updateClientBtn').click(function (e) {
            HoldOn.open();
            e.preventDefault();

            //getAccount by the clientId and the callback fucntion collects and updates the infomration on the webservice
            getAccountById(tempClientId, function(){
                var account = this;
                var clientName = $("#update_clientName").val();
                var primaryColour = $("#update_qual_colour_primary").val();
                var secondaryColour = $("#update_qual_colour_secondary").val();
                var clientPw = updateClient(tempClientId, false, account.isActive, clientName, account.password, false, primaryColour, secondaryColour);
                //Close button in htmlStr is loaded dynamically into html
                var htmlStr = "<button type='button' class='close' data-dismiss='alert' aria-label='Close' onclick='loadTab('#clients')'><span aria-hidden='true'>&times;</span></button>" +
                        clientName + " has been modified! The password for the client is: <strong>"+account.password +"</strong>"

                $("#update_passwordAlert").html(htmlStr);
                $("#update_passwordAlert").show();
            });

//            $('#updateClientModal').modal('hide') //Hides Modal when user clicks update
            $("#updateClientBtn").prop('disabled', true); //updateClientButton disabled

            setTimeout(function(){
                HoldOn.close(); //Close the loading screen
            },2000);


        });

        $('#createClientBtn').click(function (e) {
            e.preventDefault();

            var clientName = $("#clientName").val();
            var primaryColour = $("#qual_colour_primary").val();
            var secondaryColour = $("#qual_colour_secondary").val();
            $("#clientName").val("");
            var clientPw = createClient(clientName, primaryColour, secondaryColour, false, "", "#clients");
            var htmlStr = "<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button>" +
                    clientName + " has been added! The password for the client is: <strong>"+clientPw +"</strong>"

            $("#passwordAlert").html(htmlStr);
            $("#passwordAlert").show();

//            $('#createClientModal').modal('hide') //Hides Modal when user clicks update
            $("#createClientBtn").prop('disabled', true);
        });

//--------------------------------------------------------------------------------------------------------------
//These are for the create Modal to load the color wheel
        var primaryCW = Raphael.colorwheel($("#primary_color_wheel .colorwheel"), 150, 256);
        primaryCW.input($("#client_colour_primary")[0]);

        var secondaryCW = Raphael.colorwheel($("#secondary_color_wheel .colorwheel"), 150, 256);
        secondaryCW.input($("#client_colour_secondary")[0]);

        var primaryCW2 = Raphael.colorwheel($("#primary_color_wheel2 .colorwheel"), 150, 256);
        primaryCW2.input($("#client_colour_primary2")[0]);

        var secondaryCW2 = Raphael.colorwheel($("#secondary_color_wheel2 .colorwheel"), 150, 256);
        secondaryCW2.input($("#client_colour_secondary2")[0]);
//--------------------------------------------------------------------------------------------------------------
//These are for the update Modal to load the colorwheel
        var primaryCW = Raphael.colorwheel($("#update_primary_color_wheel .colorwheel"), 150, 256);
        primaryCW.input($("#update_qual_colour_primary")[0]);

        var secondaryCW = Raphael.colorwheel($("#update_secondary_color_wheel .colorwheel"), 150, 256);
        secondaryCW.input($("#update_qual_colour_secondary")[0]);

//--------------------------------------------------------------------------------------------------------------


        var vnSpace = $('#space');
        var hnSpace = $('#hiddenSpace');

        str = '\
        <li><a href="index.html" onclick="javascript: sessionStorage.clear();">Logout <span class="glyphicon glyphicon-log-out"></span></a></li>\
        <li class="dropdown active">\
            <a href="#" class="dropdown-toggle fa fa-plus fa-lg white" data-toggle="dropdown"> <span class="caret"></span></a>\
            <ul class="dropdown-menu">\
                <li><a href="#" data-toggle="modal" data-target="#qualModal" onclick="addQual();">New Qual</a></li>\
                <li><a href="#" data-toggle="modal" data-target="#createProjModal" onclick="resetProjID()">New Project</a></li>\
                <li><a href="#" data-toggle="modal" data-target="#createClientModal">New Client</a></li>\
            </ul>\
        </li>';


        $(window).on('shown.bs.modal', function () {

            getAllClients(function () {
                var clients = this;

                var res = $.map(clients, function (item) {
                    return {
                        id: item.accountId,
                        text: item.accountName
                    };
                })

                $("#clientDropdown").select2({width:"style",data: res});
            });
        });
    });



</script>

<section id="portfolio" class="bg-light-gray" style="padding: 0px; padding-top: 22px">
    <div class="container" style="margin: 0px; padding: 0px; width: inherit;">
        <!-- Services Section -->
        <div class="row">

            <div class="col-md-12" style="margin-bottom: 30px;">

                <!-- Nav tabs -->
                <div>
                    <ul class="nav nav-tabs nav-justified" role="tablist" id="tablist">
                        <li id="qualsTab" role="presentation"><a href="#quals" aria-controls="quals" role="tab"
                                                                 data-toggle="tab">Quals</a></li>
                        <li id="projectsTab" role="presentation" class="active"><a href="#projects"
                                                                                   aria-controls="projects" role="tab"
                                                                                   data-toggle="tab">Projects</a></li>
                        <li id="clientsTab" role="presentation"><a href="#clients" aria-controls="clients" role="tab"
                                                                   data-toggle="tab">Clients</a></li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="projects"></div>
                        <div role="tabpanel" class="tab-pane" id="quals"></div>
                        <div role="tabpanel" class="tab-pane" id="clients"></div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</section>

<footer></footer>

<!-- Modal For View Qual page -->
<div class="portfolio-modal modal fade" id="viewQualModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl" role="document" style= "position: fixed;">
        <div class="modal-content">

            <div class="row modal-header">
                <div id='client-logo' class="col-md-3 logo-modal portfolio-image">
                </div>
                <h3 id="qual-projectName" class="col-md-6"></h3>
                <div id="viewButtons" class="col-md-3 close-modal">
                    <i class="fa fa-times fa-5x" data-dismiss="modal" onclick="clearModalPic()"></i>
                </div>
            </div>
            
            <div class="modal-body" id="modal_body">
                <iframe id="frameViewQual" src="" width="100%" scrolling="no" frameborder="0"></iframe>
            </div>
            <div class="modal-footer hidden">
                <button id="btnQualModalClose1" type="button" class="hidden btn btn-default" data-dismiss="modal">Close
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Plugin JavaScript -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
<script src="js/classie.js"></script>
<!--<script src="js/cbpAnimatedHeader.js"></script>-->

<!-- Contact Form JavaScript -->
<script src="js/jqBootstrapValidation.js"></script>
<script src="js/contact_me.js"></script>

<!-- Custom Theme JavaScript -->
<script src="js/agency.js"></script>
<script src="js/cbpAnimatedHeader.js"></script>
</body>
</html>
