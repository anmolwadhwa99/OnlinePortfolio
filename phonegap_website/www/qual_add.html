<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Add New Qual</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]>
    <script src="js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.min.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->

    <script type="application/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="application/javascript" src="js/bootstrap.min.js"></script>
    <script src="js/webServices.js"></script>

    <script type="application/javascript" src="js/raphael-min.js"></script>
    <script type="application/javascript" src="js/colorwheel.js"></script>

    <script src="js/jquery.ui.widget.js" type="text/javascript"></script>
    <script src="js/jquery.iframe-transport.js" type="text/javascript"></script>
    <script src="js/jquery.fileupload.js" type="text/javascript"></script>
    <script src="js/jquery.cloudinary.js" type="text/javascript"></script>

    <script>
        function addQual() {
            var projName = $("#qual_project_name").val();
            var projSubTitle = $("#qual_client_name").val();
            var clientName = $("#qual_project_sub").val();
            var isAnonymous = $('input[name=qual_anonymous]:checked').val();
            var anonymousName = $("#qual_anonymous_name").val();

            var access = $('input[name=qual_public_access]:checked').val();

            var problem = $("#qual_problems").val();
            var challenges = $("#qual_challenges").val();
            var solution = $("#qual_solution").val();
            var outcome = $("#qual_outcome").val();
            var relevance = $("#qual_relevance").val();

            var clientLogo = $("#client_logo_img").attr('src');
            var productServicesImage = $("#prod_serv_img").attr('src');

            var emailAction = $("#qual_email").val();
            var websiteAction = $("#qual_website").val();

            var industry = $("#qual_industry").val();
            var tags = $("#qual_tags").val();
            var serviceLine = $("#qual_service_line").val();

            console.log(projName);
            console.log(projSubTitle);
            console.log(clientName);
            console.log(isAnonymous);
            console.log(anonymousName);
            console.log(access);
            console.log(problem);
            console.log(challenges);
            console.log(solution);
            console.log(outcome);
            console.log(relevance);
            console.log(clientLogo);
            console.log(productServicesImage);
            console.log(emailAction);
            console.log(websiteAction);
            console.log(industry);
            console.log(tags);
            console.log(serviceLine);


//            insertQual('true', isAnonymous, challenges, clientName, industry
//                    , tags, outcome, problem, projName, relevance, serviceLine, solution
//                    , 'solutionStatement', access, projSubTitle, primaryColour, secondaryColour, accentColour
//                    , emailAction, websiteAction, function () {
//                        location.replace("index1.html");
//                    }
//            );
        }
    </script>
    <style>
        .image-upload {
            height: 10em;
            position: relative;
        }

        .image-upload img {
            margin: 0;
            position: absolute;
            top: 100%;
        }

        @media all
        and (max-width: 991px) {
            .image-upload img {
                top: 0%;
            }
            .prod_serv_progress {
                margin-top: 5px !important;
            }
        }

        .prod_serv_progress {
            margin-top: -25px;
        }

        .image-upload > input {
            display: none;
        }
        .client_logo_image-upload > input{
            display: none;
        }

        .hand_interact {
            cursor: pointer;
            cursor: hand;
        }

        .fill {
            zoom: 2;

            display: block;
            margin: auto;

            height: auto;
            max-height: 100%;

            width: auto;
            max-width: 100%;
        }

        .back_button > input {
            display: none;
        }

        .back_button_img {
            max-width: 20px;
            zoom: 2;
        }

        .progress-value {
            position:absolute;
            right:0;
            left:0;
        }
    </style>
    <script type="application/javascript">
        function requireAnonName() {
            document.getElementById('qual_anonymous_name').required = true;
        }
        function optionalAnonName() {
            document.getElementById('qual_anonymous_name').required = false;
        }
    </script>
    <script type="application/javascript">
        $(document).ready(function(){

            getAllProjectImages(function () {
                var prodServs = this;
                $.each(prodServs, function(i, val){
                    $('#ddExistingProdServ').append('<option value="'+val.imageUrl+'" >' + val.imageName + '</option>');
                });
            });

            getAllClientImages(function (){
                var logos = this;
                $.each(logos, function(i, val){
                    $('#ddExistingLogo').append('<option value="'+val.imageUrl+'" >' + val.imageName + '</option>');
                });
            });
        });

        function SelectProdServ(url) {
            $('#prod_serv_img').attr('src', url);
        };

        function SelectLogo(url) {
            $('#client_logo_img').attr('src', url);
        };
    </script>
</head>

<body style="padding:20px;">
<div class="navbar navbar-inverse navbar-fixed-top">
    <div style="padding-top: 10px;padding-left: 10px;">
        <div class="back_button pull-left">
            <label for="qual_back">
                <img src="imgs/back.png" class="hand_interact back_button_img" alt="Back to Main"/>
            </label>
            <input id="qual_back" class="hand_interact" type="button" onclick="location.replace('index1.html');">
        </div>
    </div>
</div>
<form id="qual_add_form" action="javascript:addQual();" class="container-fluid" style="padding-top: 50px;">
    <div class="row">
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-12">
                    <div class="row prod_serv_image-upload image-upload">
                        <label for="qual_product_service_img"> <!-- element with this id only exists after document loads -->
                            <img id="prod_serv_img" class="img-rounded hand_interact fill" src="imgs/download.png"/>
                        </label>
                    </div>
                    <div class="row">
                        <div class="progress prod_serv_progress">
                            <div class="progress-bar progress-bar-success active progress-bar-striped prod_serv_progress-bar" role="progressbar"
                                 aria-valuemin="0" aria-valuemax="100" >
                                <span id="prod_serv_progress-value" class="progress-value" style="color: #000;"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <select style="margin-top: 40%" id="ddExistingProdServ" onchange="SelectProdServ(this.value)"  class="form-control" >
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="qual_project_name">Project Name: </label>
                        <input id="qual_project_name" type="text" class="form-control" placeholder="Project Name"
                               required autofocus>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="qual_client_name">Client Name: </label>
                        <input id="qual_client_name" type="text" class="form-control" placeholder="Client Name"
                               required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="qual_project_sub">Project Subtitle: </label>
                        <input id="qual_project_sub" type="text" class="form-control" placeholder="Subtitle">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <label for="qual_is_not_anonymous">Qual Anonymity: </label>

                    <div class="btn-group-justified" data-toggle="buttons">
                        <label class="btn btn-info active" onclick="optionalAnonName();">
                            <input type="radio" id="qual_is_not_anonymous" name="qual_anonymous" value="false"
                                   checked="checked"/>Named
                        </label>
                        <label class="btn btn-warning" onclick="requireAnonName();">
                            <input type="radio" id="qual_is_anonymous" name="qual_anonymous" value="true"/>Anonymous
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="qual_anonymous_name">Anonymous Name: </label>
                        <input id="qual_anonymous_name" type="text" class="form-control" placeholder="Anonymous Name">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="qual_email">Email Action: </label>
                        <input id="qual_email" type="email" class="form-control" placeholder="Email">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="qual_website">Website Action: </label>
                        <input id="qual_website" type="url" class="form-control" placeholder="Website">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="qual_industry">Industry: </label>
                        <input id="qual_industry" type="text" class="form-control" placeholder="Industry">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row client_logo_image-upload">
                        <label for="qual_client_logo"> <!-- element with this id only exists after document loads -->
                            <img id="client_logo_img" class="img-rounded hand_interact fill" src="imgs/download.png"/>
                        </label>
                    </div>
                    <div class="row">
                        <div class="progress client_logo_progress">
                            <div class="progress-bar progress-bar-success active progress-bar-striped client_logo_progress-bar" role="progressbar"
                                 aria-valuemin="0" aria-valuemax="100" >
                                <span id="client_logo_progress-value" class="progress-value" style="color: #000;"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <select id="ddExistingLogo" onchange="SelectLogo(this.value)"  class="form-control" >
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <br/>
                    <label for="qual_private">Qual Accesscibility: </label>
                    <br/>

                    <div class="btn-group-justified" data-toggle="buttons">
                        <label class="btn btn-info active">
                            <input type="radio" id="qual_private" name="qual_public_access" value="false"
                                   checked="checked"/>Private
                        </label>
                        <label class="btn btn-warning">
                            <input type="radio" id="qual_public" name="qual_public_access" value="true"/>Public
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br/>

    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label for="qual_problems">Problem Statement: </label>
                <textarea id="qual_problems" rows="3" class="form-control" placeholder="Problem Statement"
                          required></textarea>
            </div>
            <div class="form-group">
                <label for="qual_challenges">Challenges Faced: </label>
                <textarea id="qual_challenges" rows="3" class="form-control" placeholder="Challenges"></textarea>
            </div>
            <div class="form-group">
                <label for="qual_solution">Solution: </label>
                <textarea id="qual_solution" rows="3" class="form-control" placeholder="Solution"></textarea>
            </div>
            <div class="form-group">
                <label for="qual_outcome">Outcome: </label>
                <textarea id="qual_outcome" rows="3" class="form-control" placeholder="Outcome"></textarea>
            </div>
            <div class="form-group">
                <label for="qual_relevance">Relevance to Client: </label>
                <textarea id="qual_relevance" rows="3" class="form-control"
                          placeholder="Relevance to Client"></textarea>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <label for="qual_tags">Tags: </label>
            <textarea id="qual_tags" rows="1" class="form-control" placeholder="Tag1, Tag2, Tag3...."
                      required></textarea>
        </div>
        <div class="col-md-6">
            <label for="qual_service_line">Service Line: </label>
            <textarea id="qual_service_line" rows="1" class="form-control" placeholder="Service Line"
                      required></textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <br/>
            <button type="submit" class="btn btn-block btn-success"><span
                    class="glyphicon glyphicon-floppy-disk"></span> Submit
            </button>
        </div>
        <div class="col-md-6">
            <br/>
            <button type="reset" class="btn btn-block btn-danger"><span class="glyphicon glyphicon-repeat"></span> Reset
            </button>
        </div>
    </div>
</form>

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script>
<script type="text/javascript">
    // Setting configs
    $.cloudinary.config({cloud_name: 'onlineportfolio', api_key: '699754899746833'});
    $('.prod_serv_progress').hide();
    $('.client_logo_progress').hide();
    // Adding input to correct location
    $('.prod_serv_image-upload').append($.cloudinary.unsigned_upload_tag(
                    "ug21hs7g",
                    {cloud_name: 'onlineportfolio'},
                    {multiple: false},
                    // With specified id
                    "qual_product_service_img")
            // Binding events
    ).bind('cloudinarystart', function (e, data) {
                $('.prod_serv_progress').show();
            }
    ).bind('cloudinarydone', function (e, data) {
                console.log(data.result.secure_url);
                $('.prod_serv_progress-bar').removeClass('active');
                $('#prod_serv_progress-value').text("Upload Complete");
                $('#prod_serv_img').attr('src', data.result.url);
            }
    ).bind('cloudinaryprogress', function (e, data) {
                $('.prod_serv_progress-bar').css('width', Math.round((data.loaded * 100.0) / data.total) + '%');
                $('#prod_serv_progress-value').text(Math.round((data.loaded * 100.0) / data.total) + '%');
            }
    ).bind('cloudinaryfail', function (e, data) {
                $('#prod_serv_progress-value').text("Upload Failed");
                console.log(e);
                console.log(data);
            }
    );
    $('.client_logo_image-upload').append($.cloudinary.unsigned_upload_tag(
                    "ug21hs7g",
                    {cloud_name: 'onlineportfolio'},
                    {multiple: false},
                    // With specified id
                    "qual_client_logo")
            // Binding events
    ).bind('cloudinarystart', function (e, data) {
                $('.client_logo_progress').show();
            }
    ).bind('cloudinarydone', function (e, data) {
                console.log(data.result.secure_url);
                $('.client_logo_progress-bar').removeClass('active');
                $('#client_logo_progress-value').text("Upload Complete");
                $('#client_logo_img').attr('src', data.result.url);
            }
    ).bind('cloudinaryprogress', function (e, data) {
                $('.client_logo_progress-bar').css('width', Math.round((data.loaded * 100.0) / data.total) + '%');
                $('#client_logo_progress-value').text(Math.round((data.loaded * 100.0) / data.total) + '%');
            }
    ).bind('cloudinaryfail', function (e, data) {
                $('#client_logo_progress-value').text("Upload Failed");
                console.log(e);
                console.log(data);
            }
    );
</script>
</body>
</html>